{"version":3,"sources":["../../src/webDriver/masterWebDriver.js"],"names":["URL","chromeOptions","chrome","Options","addArguments","initBrowser","driver","Builder","forBrowser","withCapabilities","build","manage","deleteAllCookies","error","console","log","close","MasterWebDriver","Steps","fetchUrl","sign","get","findElement","By","className","click","id","sendKeys","name","submit","customSearchConfig","findElements","customSearch","search","keys","btn","Key","ENTER","navigateInDocuments","webElements","then","element","length","tagName","sleep","extractInfo","text","getText","writeJson","textContent","doc","content","jsonText","JSON","stringify","document","write"],"mappings":"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","file":"masterWebDriver.js","sourcesContent":["import 'chromedriver'\r\nimport chrome from 'selenium-webdriver/chrome'\r\nimport { Builder, By, Key, until } from 'selenium-webdriver'\r\nimport assert from 'assert'\r\n\r\nconst URL = 'https://www.jusbrasil.com.br'\r\n\r\nconst chromeOptions = new chrome.Options()\r\nchromeOptions.addArguments('test-type')\r\n// chromeOptions.addArguments('start-maximized')\r\nchromeOptions.addArguments('--js-flags=--expose-gc')\r\nchromeOptions.addArguments('--enable-precise-memory-info')\r\nchromeOptions.addArguments('--disable-popup-blocking')\r\nchromeOptions.addArguments('--disable-default-apps')\r\nchromeOptions.addArguments('--disable-infobars')\r\nchromeOptions.addArguments('--incognito')\r\nchromeOptions.addArguments('--disable-extensionss')\r\nchromeOptions.addArguments('--no-sandbox')\r\nchromeOptions.addArguments('test-type=browser')\r\n\r\nconst initBrowser = () => {\r\n  var driver\r\n  try {\r\n    driver = new Builder()\r\n      .forBrowser('chrome')\r\n      .withCapabilities(chromeOptions)\r\n      .build()\r\n    driver.manage().deleteAllCookies()\r\n    return driver\r\n  } catch (error) {\r\n    console.log('Server error: Ocorreu um erro inesperado na inicialização do arquivo binário respectivo ao navegador.'\r\n    )\r\n    console.log('Erro interno: ', error)\r\n    driver.close()\r\n  }\r\n}\r\n\r\nconst driver = initBrowser()\r\n\r\nconst MasterWebDriver = () => {\r\n  console.log('Initialized MasterWebDriver')\r\n  Steps()\r\n  // versionSite(VERSION)\r\n}\r\n\r\nconst Steps = async () => {\r\n  await fetchUrl()\r\n  await sign()\r\n  // await driver.sleep(3000)\r\n  // await customSearchConfig()\r\n  // await driver.sleep(3000)\r\n  // await navigateInDocuments(driver)\r\n}\r\n\r\nconst fetchUrl = async () => {\r\n  await driver.get(URL)\r\n}\r\n\r\nconst sign = async () => {\r\n  // SignIn no JusBrasil\r\n  await driver.findElement(By.className('btn btn--flat btn-login')).click()\r\n  await driver.findElement(By.id('form-sign-up-email')).sendKeys('amigabilidade.genero.ifmg@gmail.com')\r\n  await driver.findElement(By.id('form-sign-up-password')).sendKeys('@amigabilidade#genero')\r\n  await driver.findElement(By.name('sign-up-button')).submit()\r\n}\r\n\r\nconst customSearchConfig = async () => {\r\n  // Seleciona Jurisprudência\r\n  var customSearch = await driver.findElements(By.className('navbar-link'))\r\n  await customSearch[3].click()\r\n  // Limpa opções de órgãos judiciais\r\n  await driver.findElement(By.id('radio-clear')).click()\r\n  // Seleciona tribunal\r\n  customSearch = await driver.findElements(By.className('dropdown-toggle'))\r\n  await customSearch[2].click()\r\n  await driver.findElement(By.id('10000575')).click()\r\n  await customSearch[2].click()\r\n  search()\r\n}\r\n\r\nconst search = async () => {\r\n  var keys = 'assédio sexual'\r\n  var btn = await driver.findElement(By.name('q'))\r\n  btn.sendKeys(keys, Key.ENTER)\r\n}\r\n\r\nconst navigateInDocuments = () => {\r\n  var webElements = driver.findElements(By.className('title small'))\r\n  webElements.then(async (element) => {\r\n    if (element.length > 0) {\r\n      // rotina 1\r\n      console.log('rotina 1')\r\n      element[0].findElement(By.tagName('a')).click()\r\n      await driver.sleep(3000)\r\n      await driver.findElement(By.className('JurisprudenceDecisionTabs-item btn btn--light')).click()\r\n      await extractInfo()\r\n    } else {\r\n      // rotina 2\r\n      console.log('rotina 2')\r\n      webElements = driver.findElements(By.className('BaseSnippetWrapper-title'))\r\n      webElements.then(async (element) => {\r\n        element[0].findElement(By.tagName('a')).click()\r\n        await driver.sleep(3000)\r\n        await driver.findElement(By.className('JurisprudenceDecisionTabs-item btn btn--light')).click()\r\n        driver.sleep(3000)\r\n        await extractInfo()\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nconst extractInfo = async () => {\r\n  await driver.findElement(By.className('JurisprudencePage-content anon-content')).then((text) => {\r\n    console.log(text.getText())\r\n  })\r\n}\r\n\r\nconst writeJson = (textContent) => {\r\n  let doc = {\r\n    content: textContent\r\n  }\r\n  let jsonText = JSON.stringify(doc)\r\n  document.write(jsonText)\r\n}\r\n\r\nexport default MasterWebDriver\r\n"]}